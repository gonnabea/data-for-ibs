const lungAsymm = {
	rightExpand: [
		"오른쪽 입술이 이상하다",
		"오른쪽 이빨이라는 잘 다무러진다",
		"오른눈 백내장", 
		"오른쪽 이명",
		"오른쪽 다리 무거워짐",
		"귀와 얼굴 전체 이개혈종",
		"오른쪽 얼굴이 크고 내려앉음",
		"오른쪽 코막힘",
		"파킨슨병",
		"오른손 손떨림", 
		"오른쪽 라인 전체 통증",
		"오른쪽으로 기운다"],
	rightShrink: [
		"오른쪽 종아리 발목. 무릎. 발 안쪽 자극",
		"오른쪽 머리. 눈 통증",
		"오른쪽 이빨 통증",
		"오른쪽 쇄골 통증",
		"오른쪽 가슴 통증",
		"오른쪽다리 오금통증",
		"풀릴때 코에 핏물 가루 코딱지",
		"무릎 연골 통증 주사",
		"오른쪽 다리와 하복부 신경압박",
		"오른쪽 턱 통증",
		"오른쪽 눈 실핏줄 터짐",
		"오른쪽 눈에 눈물이 난다",
		"오른쪽 코가 막히거나 콧물", 
		"오른쪽 귀가 살짝 아프거나 뻐걱뻐걱 소리가 난다",
		"오른쪽 팔이 안 올라간다",
		"오른쪽 코가 쇄하다"
	],
	leftExpand: [
		"왼쪽 허벅지 바깥쪽이 시리고 아프다",
		"왼쪽 눈에 눈물",
		"왼쪽 얼굴 저림과 떨림",
		"왼쪽팔에 힘이 완전히 없어진다",
		"왼다리 무거워짐",
		"왼쪽 발바닥 자극. 시림. 저림",
		"왼팔 임파선 부종",
		"왼쪽 이명",
		"왼쪽 망막 찢어짐",
		"왼쪽 코가 간질. 콧물. 코딱지.", 
		"왼쪽얼굴이 크고 내려앉음",
		"감기",
		"왼쪽 치질",
		"꽁지뼈 왼쪽통증. 왼쪽 안쪽 허벅지 통증",
		"왼쪽 귀에 멍 소리",
		"왼쪽코가 뻥 뚫린다",
		"왼쪽 입술 포진",
		"왼쪽 구내염",
		"왼쪽으로 몸이 기운다",
		"왼쪽 코에 콧물이 난다",
		"왼쪽 귀에 종잇장 구기는 소리",
		"왼쪽 귀에 이석증. 머리를 오른쪽으로 기울이고 잔다",
		"왼쪽 허벅지가 시리다",
		"물구나무서기 때 왼쪽목이 뻑뻑",
		"눈이 흐릿해진다",
		"왼쪽목이 묵직하다",
		"왼쪽 기흉",
		"왼쪽 등이 묵직하고 왼쪽 어깨가 결린다"
		],
	leftShrink: [
		"왼쪽 폐에 압박감. 왼쪽목이 묵직. 오른손 풀어준다",
		"왼손에 한포진",
		"왼쪽 눈에 염증. 갈갈",
		"폐를 맞추고 양쪽 귀 뒷쪽을 잘 눌러준다",
		"왼쪽 팔이 저리고 안 올라가고 대상포진. 신경통. 기분나쁨. 쥐가나는듯한 아픔",
		"왼쪽 쇄골 통증",
		"왼쪽 편도와 귀 통증",
		"왼쪽 이개혈종", 
		"왼쪽 잇몸 붓는다",
		"왼쪽 목이 비면서 아프다",
		"왼쪽눈 주변이 쪼인다 갈갈하다",
		"왼쪽 눈이 갈갈하고 불편하다",
		"왼쪽 주먹 벽",
		"왼쪽 종아리 하지정맥류 쥐",
		"목소리가 이상해진다",
		"왼쪽가슴과 어깨가 가벼워지고 왼쪽머리에 가벼운 두통 시작",
		"왼쪽 옆구리 결림. 통증",
		"왼쪽 갈비뼈밑 등짝 통증",
		"왼쪽 갈비뼈밑 통증",
		"왼쪽라인의 피부 따끔거림",
		"왼쪽 갈비뼈 밑 통증",
		"왼쪽 목디스크",
		"왼쪽 목 가래",
		"왼쪽목 피부 트러블",
		"어깨통증 팔이 안 올라간다",
		"왼쪽 두피가 따끔거린다",
		"왼쪽 대상포진",
		"왼쪽 옆에 혓바늘이 돋는다",
		"왼쪽 입술에 피가 난다",
		"왼쪽 뺨에 뾰루지",
		"왼쪽 코막힘",
		"왼쪽 잇몸이 붓는다",
		"왼쪽 귀 뒤에 여드름이 생긴다",
		"왼쪽 귀에 통증. 물소리. 이빨통증.", 
		"감기. 왼쪽다리 중량을 올린다"
	]
}

const etc = {
	leftLegLight: [
	"바지 호주머니 체크하기",
	"가스배출 불안정",
	"창자 불안정",
	"기침이 난다"
	],
	leftToRightAsymm: [
	"대추뼈 통증",
	"오른쪽다리 오금 통증",
	"머리와 가슴에서 피가 떨어진다",
	"등짝 혈류변화 피빠진다"
	],
	heightAsstmm: ["왼쪽 창자에 가스가 부족하다"],
	rightSmallIntesExpand: [
	"약한 설사 느낌",
	"허리디스크", 
	"골반통증",
	"머리에 피가 안 올라온다",
	"기침이 난다",
	"다리가 무거워진다",
	"극심한 어지러움"
	],
	leftSmallIntesExpand: [
	"오른쪽으로 밀리면서 혓바늘",
	"밥을 못먹는다",
	"왼쪽 옆구리 창자 자극",
	"트림이 불편하게 나온다",
	"입술. 혓바닥. 잇몸이 터진다",
	"왼쪽 허리통증"
	],
	colonExpand: [
		"눈이 불편하고 갈갈하다",
"이유없이 컨디션이 나쁠때",
"창자는 어중간하고",
"속이 미식미식거릴때",
"A: 오른쪽 폐 비대칭 왼쪽팔과 왼쪽다리 중량을 올려라" 
	],
	hemorrhoids: ["치질은 창자의 왼쪽비대칭과 폐의 오른쪽비대칭이 강해질때 발생한다"],
	strongLeftAssym: [
	"머리가 가렵다",
	"배가 안고프다",
	"가슴이 간지럽고 두드러기",
	"가스가 시원하게 안나오고 다리가 무겁다",
	"위산역류와 토",
	"양쪽다리가 다 무겁다"
	],
	rightBottomHurt: [
		"가스가 많아서 밀려갔다",
		"왼쪽폐와 왼쪽창자가 많이 작아졌다 (왼쪽다리 280. 왼손 500)",
		"허리가 앞으로 꼬부라진다",
		"어깨들썩", 
		"가스를 빼줘야한다"
	],
	hematoma: ["이개혈종: 폐가 작을때. 피가 안올라올때"],
	tips: [
		"가슴치기. 다리들기.  가슴이 쪼이고 윗배가 아리하고 이빨이 아프면 앉아서 허리를 숙이고 입술을 열고 바람을 불지마라. 바람불지말고 팔을 흔든다",
		"다리가 저리고 무거울때 그쪽에 가스가 많다",
		"왼쪽 엉덩이로 앉으면 왼쪽 엉덩이 윗부분이 아프다",
		"왼쪽창자가 커고 오른쪽폐가 큰 짝짝이면 항문이 따끔거리고 치질."
	]
}



const searchInput = document.getElementById("searchInput"),
searchBtn = document.getElementById("searchBtn"),
searchArea = document.getElementById("searchArea"),
background = document.getElementById("background"),
resultArea = document.getElementById("resultArea"),
searchForm = document.getElementById("searchForm"),
case1Screen = document.getElementById("case1Screen"),
case2Screen = document.getElementById("case2Screen"),
searchKeyword = document.getElementById("searchKeyword")



function searchClick(){
    searchBtn.style.animation = "moveBtn 0.4s forwards";
    searchInput.style.animation = "focusSearch 0.4s forwards";
    searchInput.style.textAlign = "center";
    searchInput.placeholder = "";
    setTimeout(()=> {
        resultArea.addEventListener("click", revertInput);
    }, 500)
}

function revertInput(){
    searchBtn.style.animation = "revertBtn 0.4s forwards";
    searchInput.style.animation = "outFocused 0.4s forwards";
    searchInput.style.textAlign = "start";
    searchInput.placeholder = "아픈 곳을 입력하세요";
    resultArea.removeEventListener("click", revertInput);
}

function handleSearch(e){
    e.preventDefault();
    revertInput();
    case1Screen.innerHTML = null;
    case2Screen.innerHTML = null;
    let keyword = searchInput.value;
    searchKeyword.innerHTML = `${keyword} 검색결과`;
    let filtered = [];
    let title = []
    let i = 0;
    Object.values(lungAsymm).map(data => {
        data.map(string => {
            if(string.includes(keyword)){
                filtered.push(string)
                title.push(Object.keys(lungAsymm)[i])
            }
        })
        i++;
    })
    i = 0;
    let rightExpand = [],
    rightShrink = [],
    leftExpand = [],
    leftShrink = []
    for(i=0 ; i<filtered.length ; i++){
        if(title[i]==="rightExpand"){
            rightExpand.push(filtered[i])
        }
        else if(title[i]==="rightShrink"){
            rightShrink.push(filtered[i])
        }
        else if(title[i]==="leftExpand"){
            leftExpand.push(filtered[i])
        }
        else if(title[i]==="leftShrink"){
            leftShrink.push(filtered[i])
        }
    }
    resultArea.style.display = "flex";
    
    if(rightExpand.length > 0){
    const rightExpandArea = document.createElement("div");
    rightExpandArea.className = "case-container";
    case1Screen.appendChild(rightExpandArea)
    const rightExpandH3 = document.createElement("h3");
    rightExpandH3.innerHTML = "오른쪽 폐가 커지고 있는 경우";
    rightExpandArea.appendChild(rightExpandH3)
    rightExpand.map( data => {
        const span = document.createElement("span");
        span.className = "description";
        span.innerHTML = data;
        rightExpandArea.appendChild(span);    
    })
}
if(rightShrink.length > 0){
    const rightShrinkArea = document.createElement("div");
    rightShrinkArea.className = "case-container";
    case1Screen.appendChild(rightShrinkArea)
    const rightShrinkH3 = document.createElement("h3");
    rightShrinkH3.innerHTML = "오른쪽 폐가 작아지고 있는 경우";
    rightShrinkArea.appendChild(rightShrinkH3)
    rightShrink.map( data => {
        const span = document.createElement("span");
        span.className = "description";
        span.innerHTML = data;
        rightShrinkArea.appendChild(span);    
    })
}
if(leftExpand.length > 0){
    const leftExpandArea = document.createElement("div");
    leftExpandArea.className = "case-container";
    case1Screen.appendChild(leftExpandArea)
    const leftExpandH3 = document.createElement("h3");
    leftExpandH3.innerHTML = "왼쪽 폐가 커지고 있는 경우";
    leftExpandArea.appendChild(leftExpandH3)
    leftExpand.map( data => {
        const span = document.createElement("span");
        span.className = "description";
        span.innerHTML = data;
        leftExpandArea.appendChild(span);    
    })
}
if(leftShrink.length > 0){
    const leftShrinkArea = document.createElement("div");
    leftShrinkArea.className = "case-container";
    case1Screen.appendChild(leftShrinkArea)
    const leftShrinkH3 = document.createElement("h3");
    leftShrinkH3.innerHTML = "왼쪽 폐가 작아지고 있는 경우";
    leftShrinkArea.appendChild(leftShrinkH3)
    leftShrink.map( data => {
        const span = document.createElement("span");
        span.className = "description";
        span.innerHTML = data;
        leftShrinkArea.appendChild(span);    
    })
}
    function handleEtc(){
        const etcData = Object.entries(etc);
        etcData.map( data => {
            const categoryName = data[0];
            const contents = data[1];
            console.log(contents);
            const container = document.createElement("div");
            container.className = "case-container";
            case2Screen.appendChild(container);
            const h3 = document.createElement("h3");
            h3.innerHTML = nameFilter(categoryName);
            container.appendChild(h3);
            contents.map( data => {
                if(data.includes(keyword)){
                    const span = document.createElement("span");
                    span.className = "description";
                    span.innerHTML = data;
                    container.appendChild(span)
                }
            })
            const check = container.getElementsByClassName("description");
            if(check.length === 0){
                container.style.display = "none";
            }
        })
    }

    handleEtc()
}

function nameFilter(name){
    switch(name) {
        case 'leftLegLight':
            return "왼쪽 다리가 가벼울 때";
        break;
        case 'leftToRightAsymm':
            return "왼비 -> 오비"
        break;
        case 'heightAsstmm':
            return "상하비대칭"
        break;
        case 'rightSmallIntesExpand':
            return "오른쪽 소장 팽창"
        break;
        case 'leftSmallIntesExpand':
            return "왼쪽 소장 팽창"
        break;
        case 'colonExpand':
            return "대장 팽창"
        break;
        case 'hemorrhoids':
            return "치질"
        break;
        case 'strongLeftAssym':
            return "강한 왼쪽 비대칭"
        break;
        case 'rightBottomHurt':
            return "오른쪽 아랫배 통증"
        break;
        case 'hematoma':
            return "이개혈종"
        break;
        case 'tips':
            return "Tips"
        break;

    }
}


function init(){
    searchInput.addEventListener("click", searchClick);
    searchForm.addEventListener("submit", handleSearch);
}

init();